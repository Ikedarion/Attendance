version: "3.8"
services:
  nginx:
    image: nginx:1.21.1
    ports:
      - 80:80
    volumes:
      - nginx_data:/var/www/html
      - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
      - ./src:/var/www/
    depends_on:
      - php
  php:
    build: ./docker/php
    volumes:
      - php_data:/var/www/
      - ./src:/var/www/
  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    environment:
      - PMA_HOST=mydb.c7aeuq4ogm1u.ap-northeast-3.rds.amazonaws.com
      - PMA_USER=admin
      - PMA_PASSWORD=adminpassword
    ports:
      - 8080:80
volumes:
  nginx_data: null
  php_data: null

